<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.5">
    <meta name="project" content="khepri v0.4.3">

    <title>khepri â€” khepri v0.4.3</title>
    <link rel="stylesheet" href="dist/html-erlang-C3352F33.css" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-X7YVL3G2.js"></script>
    <script src="dist/sidebar_items-FD7723E7.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-PLW5RNNI.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="overview.html">
        <img src="assets/logo.svg" alt="khepri" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="overview.html" class="sidebar-projectName" translate="no">
khepri
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.4.3
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


  <span translate="no">khepri</span> 
  <small class="app-vsn" translate="no">(khepri v0.4.3)</small>

</h1>


  <section id="moduledoc">
<p>Khepri database API.</p><p>This module exposes the database API to manipulate data.</p><p>The API is mainly made of the functions used to perform simple direct atomic operations and queries on the database: <a href="#get/1"><code>get/1</code></a>, <a href="#put/2"><code>put/2</code></a>, <a href="#delete/1"><code>delete/1</code></a> and so on. In addition to that, <a href="#transaction/1"><code>transaction/1</code></a> is the starting point to run transaction functions. However the API to use inside transaction functions is provided by <a href="khepri_tx.html"><code>khepri_tx</code></a>.</p><p>Functions in this module have simplified return values to cover most frequent use cases. If you need more details about the queried or modified tree nodes, like the ability to distinguish a non-existent tree node from a tree node with no payload, you can use the <a href="khepri_adv.html"><code>khepri_adv</code></a> module.</p><p>This module also provides functions to start and stop a simple unclustered Khepri store. For more advanced setup and clustering, see <a href="khepri_cluster.html"><code>khepri_cluster</code></a>.</p><h3 id="module-a-khepri-store" class="section-heading">
  <a href="#module-a-khepri-store" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">a-khepri-store</p>
  </a>
  <a name="A_Khepri_store">A Khepri store</a>
</h3>
<p>A Khepri store is one instance of Khepri running inside a Ra cluster (which could be made of a single Erlang node). It is possible to run multiple Khepri stores in parallel by creating multiple Ra clusters.</p><p>A Khepri store is started and configured with <a href="#start/0"><code>start/0</code></a>, <a href="#start/1"><code>start/1</code></a> or <a href="#start/3"><code>start/3</code></a>. To setup a cluster, see <a href="khepri_cluster.html"><code>khepri_cluster</code></a>.</p><p>When a store is started, a store ID <a href="#t:store_id/0"><code>store_id()</code></a> is returned. This store ID is then used by the rest of this module's API. The returned store ID currently corresponds exactly to the Ra cluster name. It must be an atom though; other types are unsupported.</p><h3 id="module-interacting-with-the-khepri-store" class="section-heading">
  <a href="#module-interacting-with-the-khepri-store" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">interacting-with-the-khepri-store</p>
  </a>
  <a name="Interacting_with_the_Khepri_store">Interacting with the Khepri store</a>
</h3>
The API provides two ways to interact with a Khepri store:<ul><li>Direct atomic function for simple operations</li><li>Transactions for more complex operations</li></ul>Simple operations are calls like:<ul><li>Queries: <a href="#get/1"><code>get/1</code></a>, <a href="#exists/1"><code>exists/1</code></a>, <a href="#has_data/1"><code>has_data/1</code></a>, etc.</li><li>Updates: <a href="#put/2"><code>put/2</code></a>, <a href="#delete/1"><code>delete/1</code></a>, etc.</li></ul>Transactions are like Mnesia ones. The caller passes an anonymous function to <a href="#transaction/1"><code>transaction/1</code></a>, etc.:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="7201187206-1">(</span><span class="w">
    </span><span class="nf">fun</span><span class="p" data-group-id="7201187206-2">(</span><span class="p" data-group-id="7201187206-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="nc">khepri_tx</span><span class="p">:</span><span class="nf">put</span><span class="p" data-group-id="7201187206-3">(</span><span class="n">Path</span><span class="p">,</span><span class="w"> </span><span class="n">Value</span><span class="p" data-group-id="7201187206-3">)</span><span class="w">
    </span><span class="k">end</span><span class="p" data-group-id="7201187206-1">)</span><span class="p">.</span></code></pre>Simple operations are more efficient than transactions, but transactions are more flexible.
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:async_option/0" translate="no">async_option/0</a>

        </div>

          <div class="summary-synopsis"><p>Option to indicate if the command should be synchronous or asynchronous.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:child_list_length/0" translate="no">child_list_length/0</a>

        </div>

          <div class="summary-synopsis">Number of direct child nodes under a tree node.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:child_list_version/0" translate="no">child_list_version/0</a>

        </div>

          <div class="summary-synopsis"><p>Number of changes made to the list of child nodes of a tree node (child nodes added or removed).</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:command_options/0" translate="no">command_options/0</a>

        </div>

          <div class="summary-synopsis"><p>Options used in commands.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:data/0" translate="no">data/0</a>

        </div>

          <div class="summary-synopsis">Data stored in a tree node's payload.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:error/0" translate="no">error/0</a>

        </div>

          <div class="summary-synopsis">The error tuple returned by a function after a failure.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:error/1" translate="no">error/1</a>

        </div>

          <div class="summary-synopsis">Return value of a failed command or query.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:favor_option/0" translate="no">favor_option/0</a>

        </div>

          <div class="summary-synopsis"><p>Option to indicate where to put the cursor between freshness of the returned data and low latency of queries.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:many_payloads_ret/0" translate="no">many_payloads_ret/0</a>

        </div>

          <div class="summary-synopsis"><p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a many nodes.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:many_payloads_ret/1" translate="no">many_payloads_ret/1</a>

        </div>

          <div class="summary-synopsis"><p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on many nodes.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:minimal_ret/0" translate="no">minimal_ret/0</a>

        </div>

          <div class="summary-synopsis">The return value of update functions in the <a href="khepri.html#content"><code>khepri</code></a> module.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:node_props/0" translate="no">node_props/0</a>

        </div>

          <div class="summary-synopsis"><p>Structure used to return properties, payload and child nodes for a specific tree node.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:ok/1" translate="no">ok/1</a>

        </div>

          <div class="summary-synopsis">The result of a function after a successful call, wrapped in an &quot;ok&quot; tuple.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:payload_ret/0" translate="no">payload_ret/0</a>

        </div>

          <div class="summary-synopsis"><p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a single tree node.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:payload_ret/1" translate="no">payload_ret/1</a>

        </div>

          <div class="summary-synopsis"><p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a single tree node.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:payload_version/0" translate="no">payload_version/0</a>

        </div>

          <div class="summary-synopsis"><p>Number of changes made to the payload of a tree node.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:put_options/0" translate="no">put_options/0</a>

        </div>

          <div class="summary-synopsis"><p>Options specific to updates.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:query_options/0" translate="no">query_options/0</a>

        </div>

          <div class="summary-synopsis"><p>Options used in queries.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:store_id/0" translate="no">store_id/0</a>

        </div>

          <div class="summary-synopsis"><p>ID of a Khepri store.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:tree_options/0" translate="no">tree_options/0</a>

        </div>

          <div class="summary-synopsis"><p>Options used during tree traversal.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:trigger_id/0" translate="no">trigger_id/0</a>

        </div>

          <div class="summary-synopsis">An ID to identify a registered trigger.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:unwrapped_many_payloads_ret/0" translate="no">unwrapped_many_payloads_ret/0</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:unwrapped_many_payloads_ret/1" translate="no">unwrapped_many_payloads_ret/1</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:unwrapped_minimal_ret/0" translate="no">unwrapped_minimal_ret/0</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:unwrapped_payload_ret/0" translate="no">unwrapped_payload_ret/0</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:unwrapped_payload_ret/1" translate="no">unwrapped_payload_ret/1</a>

        </div>

      </div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap/3" translate="no">compare_and_swap(PathPattern, DataPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap/4" translate="no">compare_and_swap(StoreId, PathPattern, DataPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap/5" translate="no">compare_and_swap(StoreId, PathPattern, DataPattern, Data, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap!/3" translate="no">compare_and_swap!(PathPattern, DataPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap!/4" translate="no">compare_and_swap!(StoreId, PathPattern, DataPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#compare_and_swap!/5" translate="no">compare_and_swap!(StoreId, PathPattern, DataPattern, Data, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count/1" translate="no">count(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Counts all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count/2" translate="no">count(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Counts all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count/3" translate="no">count(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Counts all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count!/1" translate="no">count!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count!/2" translate="no">count!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count!/3" translate="no">count!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create/2" translate="no">create(PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Creates a tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create/3" translate="no">create(StoreId, PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Creates a tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create/4" translate="no">create(StoreId, PathPattern, Data, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Creates a tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create!/2" translate="no">create!(PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create!/3" translate="no">create!(StoreId, PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create!/4" translate="no">create!(StoreId, PathPattern, Data, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete/1" translate="no">delete(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete/2" translate="no">delete(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete/3" translate="no">delete(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete!/1" translate="no">delete!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete!/2" translate="no">delete!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete!/3" translate="no">delete!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many/1" translate="no">delete_many(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many/2" translate="no">delete_many(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many/3" translate="no">delete_many(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many!/1" translate="no">delete_many!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many!/2" translate="no">delete_many!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many!/3" translate="no">delete_many!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads/1" translate="no">delete_many_payloads(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads/2" translate="no">delete_many_payloads(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads/3" translate="no">delete_many_payloads(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of all tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads!/1" translate="no">delete_many_payloads!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads!/2" translate="no">delete_many_payloads!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_many_payloads!/3" translate="no">delete_many_payloads!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload/1" translate="no">delete_payload(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload/2" translate="no">delete_payload(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload/3" translate="no">delete_payload(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload!/1" translate="no">delete_payload!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload!/2" translate="no">delete_payload!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_payload!/3" translate="no">delete_payload!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists/1" translate="no">exists(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path exists or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists/2" translate="no">exists(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path exists or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists/3" translate="no">exists(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path exists or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists!/1" translate="no">exists!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists!/2" translate="no">exists!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#exists!/3" translate="no">exists!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get/1" translate="no">get(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get/2" translate="no">get(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get/3" translate="no">get(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get!/1" translate="no">get!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get!/2" translate="no">get!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get!/3" translate="no">get!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many/1" translate="no">get_many(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many/2" translate="no">get_many(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many/3" translate="no">get_many(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many!/1" translate="no">get_many!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many!/2" translate="no">get_many!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many!/3" translate="no">get_many!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or/2" translate="no">get_many_or(PathPattern, Default)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or/3" translate="no">get_many_or(StoreId, PathPattern, Default)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or/4" translate="no">get_many_or(StoreId, PathPattern, Default, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or!/2" translate="no">get_many_or!(PathPattern, Default)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or!/3" translate="no">get_many_or!(StoreId, PathPattern, Default)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_many_or!/4" translate="no">get_many_or!(StoreId, PathPattern, Default, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or/2" translate="no">get_or(PathPattern, Default)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or/3" translate="no">get_or(StoreId, PathPattern, Default)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or/4" translate="no">get_or(StoreId, PathPattern, Default, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or!/2" translate="no">get_or!(PathPattern, Default)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or!/3" translate="no">get_or!(StoreId, PathPattern, Default)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_or!/4" translate="no">get_or!(StoreId, PathPattern, Default, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_store_ids/0" translate="no">get_store_ids()</a>

        </div>

          <div class="summary-synopsis">Returns the list of running stores.<p><em>See also: </em><a href="khepri_cluster.html#get_store_ids/0">khepri_cluster:get_store_ids/0</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data/1" translate="no">has_data(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path has data or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data/2" translate="no">has_data(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path has data or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data/3" translate="no">has_data(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path has data or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data!/1" translate="no">has_data!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data!/2" translate="no">has_data!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#has_data!/3" translate="no">has_data!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#info/0" translate="no">info()</a>

        </div>

          <div class="summary-synopsis">Lists the running stores on <em>stdout</em>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#info/1" translate="no">info(StoreId)</a>

        </div>

          <div class="summary-synopsis">Lists the content of specified store on <em>stdout</em>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#info/2" translate="no">info(StoreId, Options)</a>

        </div>

          <div class="summary-synopsis">Lists the content of specified store on <em>stdout</em>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc/1" translate="no">is_sproc(PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc/2" translate="no">is_sproc(StoreId, PathPattern)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc/3" translate="no">is_sproc(StoreId, PathPattern, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc!/1" translate="no">is_sproc!(PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc!/2" translate="no">is_sproc!(StoreId, PathPattern)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_sproc!/3" translate="no">is_sproc!(StoreId, PathPattern, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put/2" translate="no">put(PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put/3" translate="no">put(StoreId, PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put/4" translate="no">put(StoreId, PathPattern, Data, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of the tree node pointed to by the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put!/2" translate="no">put!(PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put!/3" translate="no">put!(StoreId, PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put!/4" translate="no">put!(StoreId, PathPattern, Data, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many/2" translate="no">put_many(PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many/3" translate="no">put_many(StoreId, PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many/4" translate="no">put_many(StoreId, PathPattern, Data, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Sets the payload of all the tree nodes matching the given path pattern.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many!/2" translate="no">put_many!(PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many!/3" translate="no">put_many!(StoreId, PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_many!/4" translate="no">put_many!(StoreId, PathPattern, Data, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#register_trigger/3" translate="no">register_trigger(TriggerId, EventFilter, StoredProcPath)</a>

        </div>

          <div class="summary-synopsis"><p>Registers a trigger.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#register_trigger/4" translate="no">register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath)</a>

        </div>

          <div class="summary-synopsis"><p>Registers a trigger.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#register_trigger/5" translate="no">register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Registers a trigger.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#reset/0" translate="no">reset()</a>

        </div>

          <div class="summary-synopsis">Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/0">khepri_cluster:reset/0</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#reset/1" translate="no">reset(StoreIdOrTimeout)</a>

        </div>

          <div class="summary-synopsis">Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/1">khepri_cluster:reset/1</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#reset/2" translate="no">reset(StoreId, Timeout)</a>

        </div>

          <div class="summary-synopsis">Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/2">khepri_cluster:reset/2</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#run_sproc/2" translate="no">run_sproc(PathPattern, Args)</a>

        </div>

          <div class="summary-synopsis"><p>Runs the stored procedure pointed to by the given path and returns the result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#run_sproc/3" translate="no">run_sproc(StoreId, PathPattern, Args)</a>

        </div>

          <div class="summary-synopsis"><p>Runs the stored procedure pointed to by the given path and returns the result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#run_sproc/4" translate="no">run_sproc(StoreId, PathPattern, Args, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Runs the stored procedure pointed to by the given path and returns the result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#start/0" translate="no">start()</a>

        </div>

          <div class="summary-synopsis">Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/0">khepri_cluster:start/0</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#start/1" translate="no">start(RaSystemOrDataDir)</a>

        </div>

          <div class="summary-synopsis">Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/1">khepri_cluster:start/1</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#start/2" translate="no">start(RaSystemOrDataDir, StoreIdOrRaServerConfig)</a>

        </div>

          <div class="summary-synopsis">Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/2">khepri_cluster:start/2</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#start/3" translate="no">start(RaSystemOrDataDir, StoreIdOrRaServerConfig, Timeout)</a>

        </div>

          <div class="summary-synopsis">Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/3">khepri_cluster:start/3</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#stop/0" translate="no">stop()</a>

        </div>

          <div class="summary-synopsis">Stops a store.<p><em>See also: </em><a href="khepri_cluster.html#stop/0">khepri_cluster:stop/0</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#stop/1" translate="no">stop(StoreId)</a>

        </div>

          <div class="summary-synopsis">Stops a store.<p><em>See also: </em><a href="khepri_cluster.html#stop/1">khepri_cluster:stop/1</a>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#transaction/1" translate="no">transaction(Fun)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a transaction and returns its result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#transaction/2" translate="no">transaction(StoreId, Fun)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a transaction and returns its result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#transaction/3" translate="no">transaction(StoreId, Fun, ReadWrite)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a transaction and returns its result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#transaction/4" translate="no">transaction(StoreId, Fun, ReadWrite, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a transaction and returns its result.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update/2" translate="no">update(PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update/3" translate="no">update(StoreId, PathPattern, Data)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update/4" translate="no">update(StoreId, PathPattern, Data, Options)</a>

        </div>

          <div class="summary-synopsis"><p>Updates an existing tree node with the given payload.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update!/2" translate="no">update!(PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update!/3" translate="no">update!(StoreId, PathPattern, Data)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update!/4" translate="no">update!(StoreId, PathPattern, Data, Options)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#wait_for_async_ret/1" translate="no">wait_for_async_ret(Correlation)</a>

        </div>

          <div class="summary-synopsis"><p>Waits for an asynchronous call.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#wait_for_async_ret/2" translate="no">wait_for_async_ret(Correlation, Timeout)</a>

        </div>

          <div class="summary-synopsis"><p>Waits for an asynchronous call.</p></div>

      </div>

  </div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:async_option/0">

  <div class="detail-header">
    <a href="#t:async_option/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">async_option/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> async_option() ::
    boolean() |
    <a href="https://hexdocs.pm/ra/ra_server.html#t:command_correlation/0">ra_server:command_correlation</a>() |
    <a href="https://hexdocs.pm/ra/ra_server.html#t:command_priority/0">ra_server:command_priority</a>() |
    {<a href="https://hexdocs.pm/ra/ra_server.html#t:command_correlation/0">ra_server:command_correlation</a>(), <a href="https://hexdocs.pm/ra/ra_server.html#t:command_priority/0">ra_server:command_priority</a>()}.</pre>

      </div>

<p>Option to indicate if the command should be synchronous or asynchronous.</p>Values are:<ul><li><code>true</code> to perform an asynchronous low-priority command without a correlation ID.</li><li><code>false</code> to perform a synchronous command.</li><li>A correlation ID to perform an asynchronous low-priority command with that correlation ID.</li><li>A priority to perform an asynchronous command with the specified priority but without a correlation ID.</li><li>A combination of a correlation ID and a priority to perform an asynchronous command with the specified parameters.</li></ul>
  </section>
</section>
<section class="detail" id="t:child_list_length/0">

  <div class="detail-header">
    <a href="#t:child_list_length/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">child_list_length/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> child_list_length() :: non_neg_integer().</pre>

      </div>

Number of direct child nodes under a tree node.
  </section>
</section>
<section class="detail" id="t:child_list_version/0">

  <div class="detail-header">
    <a href="#t:child_list_version/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">child_list_version/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> child_list_version() :: pos_integer().</pre>

      </div>

<p>Number of changes made to the list of child nodes of a tree node (child nodes added or removed).</p>The child list version starts at 1 when a tree node is created. It is increased by 1 each time a child is added or removed. Changes made to existing nodes are not reflected in this version.
  </section>
</section>
<section class="detail" id="t:command_options/0">

  <div class="detail-header">
    <a href="#t:command_options/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">command_options/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> command_options() :: #{timeout => timeout(), async => <a href="#t:async_option/0">async_option</a>()}.</pre>

      </div>

<p>Options used in commands.</p><p>Commands are <code>put/5</code>, <a href="#delete/3"><code>delete/3</code></a> and read-write <a href="#transaction/4"><code>transaction/4</code></a>.</p><ul><li><code>timeout</code> is passed to Ra command processing function.</li><li><code>async</code> indicates the synchronous or asynchronous nature of the command; see <a href="#t:async_option/0"><code>async_option()</code></a>.</li></ul>
  </section>
</section>
<section class="detail" id="t:data/0">

  <div class="detail-header">
    <a href="#t:data/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">data/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> data() :: any().</pre>

      </div>

Data stored in a tree node's payload.
  </section>
</section>
<section class="detail" id="t:error/0">

  <div class="detail-header">
    <a href="#t:error/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">error/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> error() :: <a href="#t:error/1">error</a>(any()).</pre>

      </div>

The error tuple returned by a function after a failure.
  </section>
</section>
<section class="detail" id="t:error/1">

  <div class="detail-header">
    <a href="#t:error/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">error/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> error(Type) :: {error, Type}.</pre>

      </div>

Return value of a failed command or query.
  </section>
</section>
<section class="detail" id="t:favor_option/0">

  <div class="detail-header">
    <a href="#t:favor_option/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">favor_option/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> favor_option() :: consistency | compromise | low_latency.</pre>

      </div>

<p>Option to indicate where to put the cursor between freshness of the returned data and low latency of queries.</p>Values are:<ul><li><code>consistent</code> means that a &quot;consistent query&quot; will be used in Ra. It will return the most up-to-date piece of data the cluster agreed on. Note that it could block and eventually time out if there is no quorum in the Ra cluster.</li><li><code>compromise</code> performs &quot;leader queries&quot; most of the time to reduce latency, but uses &quot;consistent queries&quot; every 10 seconds to verify that the cluster is healthy on a regular basis. It should be faster but may block and time out like <code>consistent</code> and still return slightly out-of-date data.</li><li><code>low_latency</code> means that &quot;local queries&quot; are used exclusively. They are the fastest and have the lowest latency. However, the returned data is whatever the local Ra server has. It could be out-of-date if it has troubles keeping up with the Ra cluster. The chance of blocking and timing out is very small.</li></ul>
  </section>
</section>
<section class="detail" id="t:many_payloads_ret/0">

  <div class="detail-header">
    <a href="#t:many_payloads_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">many_payloads_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> many_payloads_ret() :: <a href="#t:many_payloads_ret/1">many_payloads_ret</a>(undefined).</pre>

      </div>

<p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a many nodes.</p><code>undefined</code> is returned if a tree node has no payload attached to it.
  </section>
</section>
<section class="detail" id="t:many_payloads_ret/1">

  <div class="detail-header">
    <a href="#t:many_payloads_ret/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">many_payloads_ret/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> many_payloads_ret(Default) ::
    <a href="khepri.html#t:ok/1">khepri:ok</a>(#{<a href="khepri_path.html#t:path/0">khepri_path:path</a>() => <a href="khepri.html#t:data/0">khepri:data</a>() | <a href="khepri_fun.html#t:standalone_fun/0">khepri_fun:standalone_fun</a>() | Default}) |
    <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on many nodes.</p><code>Default</code> is the value to return if a tree node has no payload attached to it.
  </section>
</section>
<section class="detail" id="t:minimal_ret/0">

  <div class="detail-header">
    <a href="#t:minimal_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">minimal_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> minimal_ret() :: ok | <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

The return value of update functions in the <a href="khepri.html#content"><code>khepri</code></a> module.
  </section>
</section>
<section class="detail" id="t:node_props/0">

  <div class="detail-header">
    <a href="#t:node_props/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">node_props/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> node_props() ::
    #{data => <a href="khepri.html#t:data/0">khepri:data</a>(),
      has_data => boolean(),
      sproc => <a href="khepri_fun.html#t:standalone_fun/0">khepri_fun:standalone_fun</a>(),
      is_sproc => boolean(),
      payload_version => <a href="khepri.html#t:payload_version/0">khepri:payload_version</a>(),
      child_list_version => <a href="khepri.html#t:child_list_version/0">khepri:child_list_version</a>(),
      child_list_length => <a href="khepri.html#t:child_list_length/0">khepri:child_list_length</a>(),
      child_names => [<a href="khepri_path.html#t:node_id/0">khepri_path:node_id</a>()]}.</pre>

      </div>

<p>Structure used to return properties, payload and child nodes for a specific tree node.</p><p>The payload in <code>data</code> or <code>sproc</code> is only returned if the tree node carries something. If that key is missing from the returned properties map, it means the tree node has no payload.</p>By default, the payload (if any) and its version are returned by functions exposed by <a href="khepri_adv.html"><code>khepri_adv</code></a>. The list of returned properties can be configured using the <code>props_to_return</code> option (see <a href="#t:tree_options/0"><code>tree_options()</code></a>).
  </section>
</section>
<section class="detail" id="t:ok/1">

  <div class="detail-header">
    <a href="#t:ok/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">ok/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> ok(Type) :: {ok, Type}.</pre>

      </div>

The result of a function after a successful call, wrapped in an &quot;ok&quot; tuple.
  </section>
</section>
<section class="detail" id="t:payload_ret/0">

  <div class="detail-header">
    <a href="#t:payload_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">payload_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> payload_ret() :: <a href="#t:payload_ret/1">payload_ret</a>(undefined).</pre>

      </div>

<p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a single tree node.</p><code>undefined</code> is returned if a tree node has no payload attached to it.
  </section>
</section>
<section class="detail" id="t:payload_ret/1">

  <div class="detail-header">
    <a href="#t:payload_ret/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">payload_ret/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> payload_ret(Default) ::
    <a href="khepri.html#t:ok/1">khepri:ok</a>(<a href="khepri.html#t:data/0">khepri:data</a>() | <a href="khepri_fun.html#t:standalone_fun/0">khepri_fun:standalone_fun</a>() | Default) | <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>The return value of query functions in the <a href="khepri.html#content"><code>khepri</code></a> module that work on a single tree node.</p><code>Default</code> is the value to return if a tree node has no payload attached to it.
  </section>
</section>
<section class="detail" id="t:payload_version/0">

  <div class="detail-header">
    <a href="#t:payload_version/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">payload_version/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> payload_version() :: pos_integer().</pre>

      </div>

<p>Number of changes made to the payload of a tree node.</p>The payload version starts at 1 when a tree node is created. It is increased by 1 each time the payload is added, modified or removed.
  </section>
</section>
<section class="detail" id="t:put_options/0">

  <div class="detail-header">
    <a href="#t:put_options/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">put_options/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> put_options() :: #{keep_while => <a href="khepri_condition.html#t:keep_while/0">khepri_condition:keep_while</a>()}.</pre>

      </div>

<p>Options specific to updates.</p><ul><li><code>keep_while</code> allows to define keep-while conditions on the created/updated tree node.</li></ul>
  </section>
</section>
<section class="detail" id="t:query_options/0">

  <div class="detail-header">
    <a href="#t:query_options/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">query_options/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> query_options() :: #{timeout => timeout(), favor => <a href="#t:favor_option/0">favor_option</a>()}.</pre>

      </div>

<p>Options used in queries.</p><ul><li><code>timeout</code> is passed to Ra query processing function.</li><li><code>favor</code> indicates where to put the cursor between freshness of the returned data and low latency of queries; see <a href="#t:favor_option/0"><code>favor_option()</code></a>.</li></ul>
  </section>
</section>
<section class="detail" id="t:store_id/0">

  <div class="detail-header">
    <a href="#t:store_id/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">store_id/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> store_id() :: atom().</pre>

      </div>

<p>ID of a Khepri store.</p>This is the same as the Ra cluster name hosting the Khepri store.
  </section>
</section>
<section class="detail" id="t:tree_options/0">

  <div class="detail-header">
    <a href="#t:tree_options/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">tree_options/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tree_options() ::
    #{expect_specific_node => boolean(),
      props_to_return =>
          [payload_version | child_list_version | child_list_length | child_names | payload |
           has_payload],
      include_root_props => boolean()}.</pre>

      </div>

<p>Options used during tree traversal.</p><ul><li><code>expect_specific_node</code> indicates if the path is expected to point to a specific tree node or could match many nodes.</li><li><code>props_to_return</code> indicates the list of properties to include in the returned tree node properties map. The default is <code>[payload, payload_version]</code>. Note that <code>payload</code> and <code>has_payload</code> are a bit special: the actually returned properties will be <code>data</code>/<code>sproc</code> and <code>has_data</code>/<code>is_sproc</code> respectively.</li><li><code>include_root_props</code> indicates if root properties and payload should be returned as well.</li></ul>
  </section>
</section>
<section class="detail" id="t:trigger_id/0">

  <div class="detail-header">
    <a href="#t:trigger_id/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">trigger_id/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> trigger_id() :: atom().</pre>

      </div>

An ID to identify a registered trigger.
  </section>
</section>
<section class="detail" id="t:unwrapped_many_payloads_ret/0">

  <div class="detail-header">
    <a href="#t:unwrapped_many_payloads_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">unwrapped_many_payloads_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> unwrapped_many_payloads_ret() :: <a href="#t:unwrapped_many_payloads_ret/1">unwrapped_many_payloads_ret</a>(undefined).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:unwrapped_many_payloads_ret/1">

  <div class="detail-header">
    <a href="#t:unwrapped_many_payloads_ret/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">unwrapped_many_payloads_ret/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> unwrapped_many_payloads_ret(Default) ::
    #{<a href="khepri_path.html#t:path/0">khepri_path:path</a>() => <a href="khepri.html#t:data/0">khepri:data</a>() | <a href="khepri_fun.html#t:standalone_fun/0">khepri_fun:standalone_fun</a>() | Default}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:unwrapped_minimal_ret/0">

  <div class="detail-header">
    <a href="#t:unwrapped_minimal_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">unwrapped_minimal_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> unwrapped_minimal_ret() :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:unwrapped_payload_ret/0">

  <div class="detail-header">
    <a href="#t:unwrapped_payload_ret/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">unwrapped_payload_ret/0</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> unwrapped_payload_ret() :: <a href="#t:unwrapped_payload_ret/1">unwrapped_payload_ret</a>(undefined).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:unwrapped_payload_ret/1">

  <div class="detail-header">
    <a href="#t:unwrapped_payload_ret/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">unwrapped_payload_ret/1</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> unwrapped_payload_ret(Default) :: <a href="khepri.html#t:data/0">khepri:data</a>() | <a href="khepri_fun.html#t:standalone_fun/0">khepri_fun:standalone_fun</a>() | Default.</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="compare_and_swap/3">

  <div class="detail-header">
    <a href="#compare_and_swap/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap(PathPattern, DataPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compare_and_swap(PathPattern, DataPattern, Data) -> Ret
                    when
                        PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                        Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                        Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p>Calling this function is the same as calling <code>compare_and_swap(StoreId, PathPattern, DataPattern, Data)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#compare_and_swap/4">compare_and_swap/4</a>, <a href="#compare_and_swap/5">compare_and_swap/5</a>.</p>
  </section>
</section>
<section class="detail" id="compare_and_swap/4">

  <div class="detail-header">
    <a href="#compare_and_swap/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap(StoreId, PathPattern, DataPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compare_and_swap(StoreId, PathPattern, DataPattern, Data) -> Ret
                    when
                        StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                        PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                        Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                        Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p>Calling this function is the same as calling <code>compare_and_swap(StoreId, PathPattern, DataPattern, Data, #{})</code>.<p><em>See also: </em><a href="#compare_and_swap/5">compare_and_swap/5</a>.</p>
  </section>
</section>
<section class="detail" id="compare_and_swap/5">

  <div class="detail-header">
    <a href="#compare_and_swap/5" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap(StoreId, PathPattern, DataPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compare_and_swap(StoreId, PathPattern, DataPattern, Data, Options) -> Ret
                    when
                        StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                        PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                        Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                        Options ::
                            <a href="khepri.html#t:command_options/0">khepri:command_options</a>() |
                            <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() |
                            <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                        Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload only if its data matches the given pattern.</p><p>The behavior is the same as <a href="#put/4"><code>put/4</code></a> except that if the tree node already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is returned.</p>Internally, the <code>PathPattern</code> is modified to include an <code>#if_data_matches{pattern = DataPattern}</code> condition on its last component.<p><em>See also: </em><a href="#create/4">create/4</a>, <a href="#put/4">put/4</a>, <a href="#update/4">update/4</a>, <a href="khepri_adv.html#compare_and_swap/5">khepri_adv:compare_and_swap/5</a>.</p>
  </section>
</section>
<section class="detail" id="compare_and_swap!/3">

  <div class="detail-header">
    <a href="#compare_and_swap!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap!(PathPattern, DataPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'compare_and_swap!'(PathPattern, DataPattern, Data) -> Payload
                       when
                           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                           DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                           Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="compare_and_swap!/4">

  <div class="detail-header">
    <a href="#compare_and_swap!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap!(StoreId, PathPattern, DataPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'compare_and_swap!'(StoreId, PathPattern, DataPattern, Data) -> Payload
                       when
                           StoreId :: <a href="#t:store_id/0">store_id</a>(),
                           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                           DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                           Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="compare_and_swap!/5">

  <div class="detail-header">
    <a href="#compare_and_swap!/5" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compare_and_swap!(StoreId, PathPattern, DataPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'compare_and_swap!'(StoreId, PathPattern, DataPattern, Data, Options) -> Ret
                       when
                           StoreId :: <a href="#t:store_id/0">store_id</a>(),
                           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                           DataPattern :: <a href="https://www.erlang.org/doc/man/ets.html#type-match_pattern">ets:match_pattern</a>(),
                           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                           Options ::
                               <a href="khepri.html#t:command_options/0">khepri:command_options</a>() |
                               <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() |
                               <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                           Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="count/1">

  <div class="detail-header">
    <a href="#count/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> count(PathPattern) -> Ret
         when
             PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
             Ret :: <a href="#t:ok/1">ok</a>(Count) | <a href="#t:error/0">error</a>(),
             Count :: non_neg_integer().</pre>

      </div>

<p>Counts all tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>count(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#count/2">count/2</a>, <a href="#count/3">count/3</a>.</p>
  </section>
</section>
<section class="detail" id="count/2">

  <div class="detail-header">
    <a href="#count/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> count(StoreId, PathPattern) -> Ret
         when
             StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
             PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
             Ret :: <a href="#t:ok/1">ok</a>(Count) | <a href="#t:error/0">error</a>(),
             Count :: non_neg_integer();
     (PathPattern, Options) -> Ret
         when
             PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
             Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
             Ret :: <a href="#t:ok/1">ok</a>(Count) | <a href="#t:error/0">error</a>(),
             Count :: non_neg_integer().</pre>

      </div>

<p>Counts all tree nodes matching the given path pattern.</p>This function accepts the following two forms:<ul><li><code>count(StoreId, PathPattern)</code>. Calling it is the same as calling <code>count(StoreId, PathPattern, #{})</code>.</li><li><code>count(PathPattern, Options)</code>. Calling it is the same as calling <code>count(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#count/3">count/3</a>.</p>
  </section>
</section>
<section class="detail" id="count/3">

  <div class="detail-header">
    <a href="#count/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> count(StoreId, PathPattern, Options) -> Ret
         when
             StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
             PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
             Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
             Ret :: <a href="#t:ok/1">ok</a>(Count) | <a href="#t:error/0">error</a>(),
             Count :: non_neg_integer().</pre>

      </div>

<p>Counts all tree nodes matching the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The root node is not included in the count.</p>Example:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:foo/:bar&#39;.</span><span class="w">
  </span><span class="p" data-group-id="2036465380-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2036465380-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">count</span><span class="p" data-group-id="2036465380-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2036465380-3">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="n">KHEPRI_WILDCARD_STAR</span><span class="p" data-group-id="2036465380-3">]</span><span class="p" data-group-id="2036465380-2">)</span><span class="p">.</span></code></pre>
  </section>
</section>
<section class="detail" id="count!/1">

  <div class="detail-header">
    <a href="#count!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'count!'(PathPattern) -> Payload
            when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="count!/2">

  <div class="detail-header">
    <a href="#count!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'count!'(StoreId, PathPattern) -> Payload
            when
                StoreId :: <a href="#t:store_id/0">store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>();
        (PathPattern, Options) -> Payload
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="count!/3">

  <div class="detail-header">
    <a href="#count!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'count!'(StoreId, PathPattern, Options) -> Payload
            when
                StoreId :: <a href="#t:store_id/0">store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="create/2">

  <div class="detail-header">
    <a href="#create/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create(PathPattern, Data) -> Ret
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Creates a tree node with the given payload.</p>Calling this function is the same as calling <code>create(StoreId, PathPattern, Data)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#create/3">create/3</a>, <a href="#create/4">create/4</a>.</p>
  </section>
</section>
<section class="detail" id="create/3">

  <div class="detail-header">
    <a href="#create/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create(StoreId, PathPattern, Data) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Creates a tree node with the given payload.</p>Calling this function is the same as calling <code>create(StoreId, PathPattern, Data, #{})</code>.<p><em>See also: </em><a href="#create/4">create/4</a>.</p>
  </section>
</section>
<section class="detail" id="create/4">

  <div class="detail-header">
    <a href="#create/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create(StoreId, PathPattern, Data, Options) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Creates a tree node with the given payload.</p><p>The behavior is the same as <a href="#put/4"><code>put/4</code></a> except that if the tree node already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is returned.</p>Internally, the <code>PathPattern</code> is modified to include an <code>#if_node_exists{exists = false}</code> condition on its last component.<p><em>See also: </em><a href="#compare_and_swap/5">compare_and_swap/5</a>, <a href="#put/4">put/4</a>, <a href="#update/4">update/4</a>, <a href="khepri_adv.html#create/4">khepri_adv:create/4</a>.</p>
  </section>
</section>
<section class="detail" id="create!/2">

  <div class="detail-header">
    <a href="#create!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create!(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'create!'(PathPattern, Data) -> Payload
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="create!/3">

  <div class="detail-header">
    <a href="#create!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create!(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'create!'(StoreId, PathPattern, Data) -> Payload
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="create!/4">

  <div class="detail-header">
    <a href="#create!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create!(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'create!'(StoreId, PathPattern, Data, Options) -> Ret
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Options ::
                     <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                 Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete/1">

  <div class="detail-header">
    <a href="#delete/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete(PathPattern) -> Ret when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>delete(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#delete/2">delete/2</a>, <a href="#delete/3">delete/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete/2">

  <div class="detail-header">
    <a href="#delete/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete(StoreId, PathPattern) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>();
      (PathPattern, Options) -> Ret
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the tree node pointed to by the given path pattern.</p>This function accepts the following two forms:<ul><li><code>delete(StoreId, PathPattern)</code>. Calling it is the same as calling <code>delete(StoreId, PathPattern, #{})</code>.</li><li><code>delete(PathPattern, Options)</code>. Calling it is the same as calling <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#delete/3">delete/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete/3">

  <div class="detail-header">
    <a href="#delete/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete(StoreId, PathPattern, Options) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Deletes the tree node pointed to by the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time. If you want to delete multiple nodes at once, use <a href="#delete_many/3"><code>delete_many/3</code></a>.</p>Example:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Delete the tree node at `/:foo/:bar&#39;.</span><span class="w">
  </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri_adv</span><span class="p">:</span><span class="nf">delete</span><span class="p" data-group-id="0456187731-1">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0456187731-2">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="0456187731-2">]</span><span class="p" data-group-id="0456187731-1">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#delete_many/3">delete_many/3</a>, <a href="khepri_adv.html#delete/3">khepri_adv:delete/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete!/1">

  <div class="detail-header">
    <a href="#delete!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete!'(PathPattern) -> Payload
             when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete!/2">

  <div class="detail-header">
    <a href="#delete!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete!'(StoreId, PathPattern) -> Payload
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>();
         (PathPattern, Options) -> Ret
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete!/3">

  <div class="detail-header">
    <a href="#delete!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete!'(StoreId, PathPattern, Options) -> Ret
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many/1">

  <div class="detail-header">
    <a href="#delete_many/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many(PathPattern) -> Ret
               when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes all tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>delete_many(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#delete_many/2">delete_many/2</a>, <a href="#delete_many/3">delete_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many/2">

  <div class="detail-header">
    <a href="#delete_many/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many(StoreId, PathPattern) -> Ret
               when
                   StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>();
           (PathPattern, Options) -> Ret
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes all tree nodes matching the given path pattern.</p>This function accepts the following two forms:<ul><li><code>delete_many(StoreId, PathPattern)</code>. Calling it is the same as calling <code>delete(StoreId, PathPattern, #{})</code>.</li><li><code>delete_many(PathPattern, Options)</code>. Calling it is the same as calling <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#delete_many/3">delete_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many/3">

  <div class="detail-header">
    <a href="#delete_many/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many(StoreId, PathPattern, Options) -> Ret
               when
                   StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Deletes all tree nodes matching the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p>Example:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Delete all nodes in the tree.</span><span class="w">
  </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri_adv</span><span class="p">:</span><span class="nf">delete_many</span><span class="p" data-group-id="5856735516-1">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5856735516-2">[</span><span class="o">?</span><span class="n">KHEPRI_WILDCARD_STAR</span><span class="p" data-group-id="5856735516-2">]</span><span class="p" data-group-id="5856735516-1">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#delete/3">delete/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many!/1">

  <div class="detail-header">
    <a href="#delete_many!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many!'(PathPattern) -> Payload
                  when
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many!/2">

  <div class="detail-header">
    <a href="#delete_many!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many!'(StoreId, PathPattern) -> Payload
                  when
                      StoreId :: <a href="#t:store_id/0">store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>();
              (PathPattern, Options) -> Ret
                  when
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                      Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many!/3">

  <div class="detail-header">
    <a href="#delete_many!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many!'(StoreId, PathPattern, Options) -> Ret
                  when
                      StoreId :: <a href="#t:store_id/0">store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                      Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many_payloads/1">

  <div class="detail-header">
    <a href="#delete_many_payloads/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many_payloads(PathPattern) -> Ret
                        when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the payload of all tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>delete_many_payloads(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#delete_many_payloads/2">delete_many_payloads/2</a>, <a href="#delete_many_payloads/3">delete_many_payloads/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many_payloads/2">

  <div class="detail-header">
    <a href="#delete_many_payloads/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many_payloads(StoreId, PathPattern) -> Ret
                        when
                            StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                            PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                            Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the payload of all tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>delete_many_payloads(StoreId, PathPattern, #{})</code>.<p><em>See also: </em><a href="#delete_many_payloads/3">delete_many_payloads/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many_payloads/3">

  <div class="detail-header">
    <a href="#delete_many_payloads/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_many_payloads(StoreId, PathPattern, Options) -> Ret
                        when
                            StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                            PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                            Options ::
                                <a href="khepri.html#t:command_options/0">khepri:command_options</a>() |
                                <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() |
                                <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                            Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Deletes the payload of all tree nodes matching the given path pattern.</p>In other words, the payload is set to <a href="khepri_payload.html#t:no_payload/0"><code>khepri_payload:no_payload()</code></a>. Otherwise, the behavior is that of <a href="#put/4"><code>put/4</code></a>.<p><em>See also: </em><a href="#delete_many/3">delete_many/3</a>, <a href="#put/4">put/4</a>, <a href="khepri_adv.html#delete_many_payloads/3">khepri_adv:delete_many_payloads/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_many_payloads!/1">

  <div class="detail-header">
    <a href="#delete_many_payloads!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many_payloads!'(PathPattern) -> Payload
                           when
                               PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                               Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many_payloads!/2">

  <div class="detail-header">
    <a href="#delete_many_payloads!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many_payloads!'(StoreId, PathPattern) -> Payload
                           when
                               StoreId :: <a href="#t:store_id/0">store_id</a>(),
                               PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                               Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_many_payloads!/3">

  <div class="detail-header">
    <a href="#delete_many_payloads!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_many_payloads!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_many_payloads!'(StoreId, PathPattern, Options) -> Ret
                           when
                               StoreId :: <a href="#t:store_id/0">store_id</a>(),
                               PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                               Options ::
                                   <a href="khepri.html#t:command_options/0">khepri:command_options</a>() |
                                   <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() |
                                   <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                               Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_payload/1">

  <div class="detail-header">
    <a href="#delete_payload/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_payload(PathPattern) -> Ret
                  when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the payload of the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>delete_payload(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#delete_payload/2">delete_payload/2</a>, <a href="#delete_payload/3">delete_payload/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_payload/2">

  <div class="detail-header">
    <a href="#delete_payload/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_payload(StoreId, PathPattern) -> Ret
                  when
                      StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Deletes the payload of the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>delete_payload(StoreId, PathPattern, #{})</code>.<p><em>See also: </em><a href="#delete_payload/3">delete_payload/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_payload/3">

  <div class="detail-header">
    <a href="#delete_payload/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> delete_payload(StoreId, PathPattern, Options) -> Ret
                  when
                      StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Options ::
                          <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                      Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Deletes the payload of the tree node pointed to by the given path pattern.</p>In other words, the payload is set to <a href="khepri_payload.html#t:no_payload/0"><code>khepri_payload:no_payload()</code></a>. Otherwise, the behavior is that of <a href="#put/4"><code>put/4</code></a>.<p><em>See also: </em><a href="#put/4">put/4</a>, <a href="khepri_adv.html#delete_payload/3">khepri_adv:delete_payload/3</a>.</p>
  </section>
</section>
<section class="detail" id="delete_payload!/1">

  <div class="detail-header">
    <a href="#delete_payload!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_payload!'(PathPattern) -> Payload
                     when
                         PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                         Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_payload!/2">

  <div class="detail-header">
    <a href="#delete_payload!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_payload!'(StoreId, PathPattern) -> Payload
                     when
                         StoreId :: <a href="#t:store_id/0">store_id</a>(),
                         PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                         Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_payload!/3">

  <div class="detail-header">
    <a href="#delete_payload!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_payload!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'delete_payload!'(StoreId, PathPattern, Options) -> Ret
                     when
                         StoreId :: <a href="#t:store_id/0">store_id</a>(),
                         PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                         Options ::
                             <a href="khepri.html#t:command_options/0">khepri:command_options</a>() |
                             <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() |
                             <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                         Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="exists/1">

  <div class="detail-header">
    <a href="#exists/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> exists(PathPattern) -> Exists | Error
          when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Exists :: boolean(), Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path exists or not.</p>Calling this function is the same as calling <code>exists(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#exists/2">exists/2</a>, <a href="#exists/3">exists/3</a>.</p>
  </section>
</section>
<section class="detail" id="exists/2">

  <div class="detail-header">
    <a href="#exists/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> exists(StoreId, PathPattern) -> Exists | Error
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Exists :: boolean(),
              Error :: <a href="khepri.html#t:error/0">khepri:error</a>();
      (PathPattern, Options) -> Exists | Error
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Exists :: boolean(),
              Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path exists or not.</p>This function accepts the following two forms:<ul><li><code>exists(StoreId, PathPattern)</code>. Calling it is the same as calling <code>exists(StoreId, PathPattern, #{})</code>.</li><li><code>exists(PathPattern, Options)</code>. Calling it is the same as calling <code>exists(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#exists/3">exists/3</a>.</p>
  </section>
</section>
<section class="detail" id="exists/3">

  <div class="detail-header">
    <a href="#exists/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> exists(StoreId, PathPattern, Options) -> Exists | Error
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Exists :: boolean(),
              Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path exists or not.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.<p><em>See also: </em><a href="#get/3">get/3</a>.</p>
  </section>
</section>
<section class="detail" id="exists!/1">

  <div class="detail-header">
    <a href="#exists!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'exists!'(PathPattern) -> Exists when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Exists :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="exists!/2">

  <div class="detail-header">
    <a href="#exists!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'exists!'(StoreId, PathPattern) -> Exists
             when StoreId :: <a href="#t:store_id/0">store_id</a>(), PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Exists :: boolean();
         (PathPattern, Options) -> Exists
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Exists :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="exists!/3">

  <div class="detail-header">
    <a href="#exists!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">exists!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'exists!'(StoreId, PathPattern, Options) -> Exists
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Exists :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get/1">

  <div class="detail-header">
    <a href="#get/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get(PathPattern) -> Ret when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>().</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>get(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#get/2">get/2</a>, <a href="#get/3">get/3</a>.</p>
  </section>
</section>
<section class="detail" id="get/2">

  <div class="detail-header">
    <a href="#get/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get(StoreId, PathPattern) -> Ret
       when
           StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Ret :: <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>();
   (PathPattern, Options) -> Ret
       when
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
           Ret :: <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>().</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern.</p>This function accepts the following two forms:<ul><li><code>get(StoreId, PathPattern)</code>. Calling it is the same as calling <code>get(StoreId, PathPattern, #{})</code>.</li><li><code>get(PathPattern, Options)</code>. Calling it is the same as calling <code>get(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#get/3">get/3</a>.</p>
  </section>
</section>
<section class="detail" id="get/3">

  <div class="detail-header">
    <a href="#get/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get(StoreId, PathPattern, Options) -> Ret
       when
           StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
           Ret :: <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>().</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.</p><p>The returned <code>{ok, Payload}</code> tuple contains the payload of the targeted tree node, or <code>{ok, undefined}</code> if the tree node had no payload.</p>Example: query a tree node which holds the atom <code>value</code><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:foo/:bar&#39;.</span><span class="w">
  </span><span class="p" data-group-id="9095854431-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p" data-group-id="9095854431-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get</span><span class="p" data-group-id="9095854431-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9095854431-3">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="9095854431-3">]</span><span class="p" data-group-id="9095854431-2">)</span><span class="p">.</span></code></pre>Example: query an existing tree node with no payload<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:no_payload&#39;.</span><span class="w">
  </span><span class="p" data-group-id="5278507059-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">undefined</span><span class="p" data-group-id="5278507059-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get</span><span class="p" data-group-id="5278507059-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5278507059-3">[</span><span class="ss">no_payload</span><span class="p" data-group-id="5278507059-3">]</span><span class="p" data-group-id="5278507059-2">)</span><span class="p">.</span></code></pre>Example: query a non-existent tree node<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:non_existent&#39;.</span><span class="w">
  </span><span class="p" data-group-id="3209706974-1">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="nf">khepri_error</span><span class="p" data-group-id="3209706974-2">(</span><span class="ss">node_not_found</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="3209706974-2">)</span><span class="p" data-group-id="3209706974-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get</span><span class="p" data-group-id="3209706974-3">(</span><span class="w">
                                                </span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3209706974-4">[</span><span class="ss">non_existent</span><span class="p" data-group-id="3209706974-4">]</span><span class="p" data-group-id="3209706974-3">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#get_many/3">get_many/3</a>, <a href="#get_or/3">get_or/3</a>, <a href="khepri_adv.html#get/3">khepri_adv:get/3</a>.</p>
  </section>
</section>
<section class="detail" id="get!/1">

  <div class="detail-header">
    <a href="#get!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get!'(PathPattern) -> Payload
          when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get!/2">

  <div class="detail-header">
    <a href="#get!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get!'(StoreId, PathPattern) -> Payload
          when
              StoreId :: <a href="#t:store_id/0">store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>();
      (PathPattern, Options) -> Payload
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get!/3">

  <div class="detail-header">
    <a href="#get!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get!'(StoreId, PathPattern, Options) -> Payload
          when
              StoreId :: <a href="#t:store_id/0">store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many/1">

  <div class="detail-header">
    <a href="#get_many/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many(PathPattern) -> Ret
            when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Ret :: <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>().</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>get_many(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#get_many/2">get_many/2</a>, <a href="#get_many/3">get_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="get_many/2">

  <div class="detail-header">
    <a href="#get_many/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many(StoreId, PathPattern) -> Ret
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Ret :: <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>();
        (PathPattern, Options) -> Ret
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                Ret :: <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>().</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern.</p>This function accepts the following two forms:<ul><li><code>get_many(StoreId, PathPattern)</code>. Calling it is the same as calling <code>get_many(StoreId, PathPattern, #{})</code>.</li><li><code>get_many(PathPattern, Options)</code>. Calling it is the same as calling <code>get_many(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#get_many/3">get_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="get_many/3">

  <div class="detail-header">
    <a href="#get_many/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many(StoreId, PathPattern, Options) -> Ret
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                Ret :: <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>().</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern.</p><p>Calling this function is the same as calling <code>get_many_or(StoreId, PathPattern, undefined, Options)</code>.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The returned <code>{ok, PayloadsMap}</code> tuple contains a map where keys correspond to the path to a tree node matching the path pattern. Each key then points to the payload of that matching tree node, or <code>Default</code> if the tree node had no payload.</p>Example: query all nodes in the tree<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Get all nodes in the tree. The tree is:</span><span class="w">
  </span><span class="c1">%% &lt;root&gt;</span><span class="w">
  </span><span class="c1">%% `-- foo</span><span class="w">
  </span><span class="c1">%%     `-- bar = value</span><span class="w">
  </span><span class="p" data-group-id="9057502086-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9057502086-2">#{</span><span class="p" data-group-id="9057502086-3">[</span><span class="ss">foo</span><span class="p" data-group-id="9057502086-3">]</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="ss">undefined</span><span class="p">,</span><span class="w">
         </span><span class="p" data-group-id="9057502086-4">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="9057502086-4">]</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="ss">value</span><span class="p" data-group-id="9057502086-2">}</span><span class="p" data-group-id="9057502086-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get_many</span><span class="p" data-group-id="9057502086-5">(</span><span class="w">
                                   </span><span class="n">StoreId</span><span class="p">,</span><span class="w">
                                   </span><span class="p" data-group-id="9057502086-6">[</span><span class="o">?</span><span class="n">KHEPRI_WILDCARD_STAR_STAR</span><span class="p" data-group-id="9057502086-6">]</span><span class="p" data-group-id="9057502086-5">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#get/3">get/3</a>, <a href="#get_many_or/4">get_many_or/4</a>, <a href="khepri_adv.html#get_many/3">khepri_adv:get_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="get_many!/1">

  <div class="detail-header">
    <a href="#get_many!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many!'(PathPattern) -> Payload
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many!/2">

  <div class="detail-header">
    <a href="#get_many!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many!'(StoreId, PathPattern) -> Payload
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>();
           (PathPattern, Options) -> Payload
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many!/3">

  <div class="detail-header">
    <a href="#get_many!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many!'(StoreId, PathPattern, Options) -> Payload
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many_or/2">

  <div class="detail-header">
    <a href="#get_many_or/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or(PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many_or(PathPattern, Default) -> Ret
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                   Ret :: <a href="khepri.html#t:many_payloads_ret/1">khepri:many_payloads_ret</a>(Default).</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p>Calling this function is the same as calling <code>get_many_or(StoreId, PathPattern, Default)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#get_many_or/3">get_many_or/3</a>, <a href="#get_many_or/4">get_many_or/4</a>.</p>
  </section>
</section>
<section class="detail" id="get_many_or/3">

  <div class="detail-header">
    <a href="#get_many_or/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or(StoreId, PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many_or(StoreId, PathPattern, Default) -> Ret
               when
                   StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                   Ret :: <a href="khepri.html#t:many_payloads_ret/1">khepri:many_payloads_ret</a>(Default);
           (PathPattern, Default, Options) -> Ret
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                   Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Ret :: <a href="khepri.html#t:many_payloads_ret/1">khepri:many_payloads_ret</a>(Default).</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p>This function accepts the following two forms:<ul><li><code>get_many_or(StoreId, PathPattern, Default)</code>. Calling it is the same as calling <code>get_many_or(StoreId, PathPattern, Default, #{})</code>.</li><li><code>get_many_or(PathPattern, Default, Options)</code>. Calling it is the same as calling <code>get_many_or(StoreId, PathPattern, Default, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#get_many_or/4">get_many_or/4</a>.</p>
  </section>
</section>
<section class="detail" id="get_many_or/4">

  <div class="detail-header">
    <a href="#get_many_or/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or(StoreId, PathPattern, Default, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_many_or(StoreId, PathPattern, Default, Options) -> Ret
               when
                   StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                   Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   Ret :: <a href="khepri.html#t:many_payloads_ret/1">khepri:many_payloads_ret</a>(Default).</pre>

      </div>

<p>Returns payloads of all the tree nodes matching the given path pattern, or a default payload.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The returned <code>{ok, PayloadsMap}</code> tuple contains a map where keys correspond to the path to a tree node matching the path pattern. Each key then points to the payload of that matching tree node, or <code>Default</code> if the tree node had no payload.</p>Example: query all nodes in the tree<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Get all nodes in the tree. The tree is:</span><span class="w">
  </span><span class="c1">%% &lt;root&gt;</span><span class="w">
  </span><span class="c1">%% `-- foo</span><span class="w">
  </span><span class="c1">%%     `-- bar = value</span><span class="w">
  </span><span class="p" data-group-id="9062082671-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9062082671-2">#{</span><span class="p" data-group-id="9062082671-3">[</span><span class="ss">foo</span><span class="p" data-group-id="9062082671-3">]</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="ss">default</span><span class="p">,</span><span class="w">
         </span><span class="p" data-group-id="9062082671-4">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="9062082671-4">]</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="ss">value</span><span class="p" data-group-id="9062082671-2">}</span><span class="p" data-group-id="9062082671-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get_many_or</span><span class="p" data-group-id="9062082671-5">(</span><span class="w">
                                   </span><span class="n">StoreId</span><span class="p">,</span><span class="w">
                                   </span><span class="p" data-group-id="9062082671-6">[</span><span class="o">?</span><span class="n">KHEPRI_WILDCARD_STAR_STAR</span><span class="p" data-group-id="9062082671-6">]</span><span class="p">,</span><span class="w">
                                   </span><span class="ss">default</span><span class="p" data-group-id="9062082671-5">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#get_many/3">get_many/3</a>, <a href="#get_or/4">get_or/4</a>, <a href="khepri_adv.html#get_many/3">khepri_adv:get_many/3</a>.</p>
  </section>
</section>
<section class="detail" id="get_many_or!/2">

  <div class="detail-header">
    <a href="#get_many_or!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or!(PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many_or!'(PathPattern, Default) -> Payload
                  when
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many_or!/3">

  <div class="detail-header">
    <a href="#get_many_or!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or!(StoreId, PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many_or!'(StoreId, PathPattern, Default) -> Payload
                  when
                      StoreId :: <a href="#t:store_id/0">store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>();
              (PathPattern, Default, Options) -> Payload
                  when
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                      Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_many_or!/4">

  <div class="detail-header">
    <a href="#get_many_or!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_many_or!(StoreId, PathPattern, Default, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_many_or!'(StoreId, PathPattern, Default, Options) -> Payload
                  when
                      StoreId :: <a href="#t:store_id/0">store_id</a>(),
                      PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                      Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                      Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                      Payload :: <a href="khepri.html#t:unwrapped_many_payloads_ret/0">khepri:unwrapped_many_payloads_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_or/2">

  <div class="detail-header">
    <a href="#get_or/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or(PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_or(PathPattern, Default) -> Ret
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
              Ret :: <a href="khepri.html#t:payload_ret/1">khepri:payload_ret</a>(Default).</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p>Calling this function is the same as calling <code>get_or(StoreId, PathPattern, Default)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#get_or/3">get_or/3</a>, <a href="#get_or/4">get_or/4</a>.</p>
  </section>
</section>
<section class="detail" id="get_or/3">

  <div class="detail-header">
    <a href="#get_or/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or(StoreId, PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_or(StoreId, PathPattern, Default) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
              Ret :: <a href="khepri.html#t:payload_ret/1">khepri:payload_ret</a>(Default);
      (PathPattern, Default, Options) -> Ret
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
              Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Ret :: <a href="khepri.html#t:payload_ret/1">khepri:payload_ret</a>(Default).</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p>This function accepts the following two forms:<ul><li><code>get_or(StoreId, PathPattern, Default)</code>. Calling it is the same as calling <code>get_or(StoreId, PathPattern, Default, #{})</code>.</li><li><code>get_or(PathPattern, Default, Options)</code>. Calling it is the same as calling <code>get_or(StoreId, PathPattern, Default, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#get_or/4">get_or/4</a>.</p>
  </section>
</section>
<section class="detail" id="get_or/4">

  <div class="detail-header">
    <a href="#get_or/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or(StoreId, PathPattern, Default, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_or(StoreId, PathPattern, Default, Options) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
              Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
              Ret :: <a href="khepri.html#t:payload_ret/1">khepri:payload_ret</a>(Default).</pre>

      </div>

<p>Returns the payload of the tree node pointed to by the given path pattern, or a default value.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.</p><p>The returned <code>{ok, Payload}</code> tuple contains the payload of the targeted tree node, or <code>{ok, Default}</code> if the tree node had no payload or was not found.</p>Example: query a tree node which holds the atom <code>value</code><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:foo/:bar&#39;.</span><span class="w">
  </span><span class="p" data-group-id="4474666155-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p" data-group-id="4474666155-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get_or</span><span class="p" data-group-id="4474666155-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4474666155-3">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="4474666155-3">]</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p" data-group-id="4474666155-2">)</span><span class="p">.</span></code></pre>Example: query an existing tree node with no payload<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:no_payload&#39;.</span><span class="w">
  </span><span class="p" data-group-id="2158465839-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p" data-group-id="2158465839-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get_or</span><span class="p" data-group-id="2158465839-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2158465839-3">[</span><span class="ss">no_payload</span><span class="p" data-group-id="2158465839-3">]</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p" data-group-id="2158465839-2">)</span><span class="p">.</span></code></pre>Example: query a non-existent tree node<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Query the tree node at `/:non_existent&#39;.</span><span class="w">
  </span><span class="p" data-group-id="2538322966-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p" data-group-id="2538322966-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri</span><span class="p">:</span><span class="nf">get_or</span><span class="p" data-group-id="2538322966-2">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2538322966-3">[</span><span class="ss">non_existent</span><span class="p" data-group-id="2538322966-3">]</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p" data-group-id="2538322966-2">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#get/3">get/3</a>, <a href="#get_many_or/4">get_many_or/4</a>, <a href="khepri_adv.html#get/3">khepri_adv:get/3</a>.</p>
  </section>
</section>
<section class="detail" id="get_or!/2">

  <div class="detail-header">
    <a href="#get_or!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or!(PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_or!'(PathPattern, Default) -> Payload
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                 Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_or!/3">

  <div class="detail-header">
    <a href="#get_or!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or!(StoreId, PathPattern, Default)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_or!'(StoreId, PathPattern, Default) -> Payload
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                 Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>();
         (PathPattern, Default, Options) -> Payload
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                 Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_or!/4">

  <div class="detail-header">
    <a href="#get_or!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_or!(StoreId, PathPattern, Default, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'get_or!'(StoreId, PathPattern, Default, Options) -> Payload
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Default :: <a href="khepri.html#t:data/0">khepri:data</a>(),
                 Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Payload :: <a href="khepri.html#t:unwrapped_payload_ret/0">khepri:unwrapped_payload_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_store_ids/0">

  <div class="detail-header">
    <a href="#get_store_ids/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_store_ids()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_store_ids() -> [StoreId] when StoreId :: <a href="#t:store_id/0">store_id</a>().</pre>

      </div>

Returns the list of running stores.<p><em>See also: </em><a href="khepri_cluster.html#get_store_ids/0">khepri_cluster:get_store_ids/0</a>.</p>
  </section>
</section>
<section class="detail" id="has_data/1">

  <div class="detail-header">
    <a href="#has_data/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> has_data(PathPattern) -> HasData | Error
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                HasData :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path has data or not.</p>Calling this function is the same as calling <code>has_data(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#has_data/2">has_data/2</a>, <a href="#has_data/3">has_data/3</a>.</p>
  </section>
</section>
<section class="detail" id="has_data/2">

  <div class="detail-header">
    <a href="#has_data/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> has_data(StoreId, PathPattern) -> HasData | Error
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                HasData :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>();
        (PathPattern, Options) -> HasData | Error
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                HasData :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path has data or not.</p>This function accepts the following two forms:<ul><li><code>has_data(StoreId, PathPattern)</code>. Calling it is the same as calling <code>has_data(StoreId, PathPattern, #{})</code>.</li><li><code>has_data(PathPattern, Options)</code>. Calling it is the same as calling <code>has_data(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#has_data/3">has_data/3</a>.</p>
  </section>
</section>
<section class="detail" id="has_data/3">

  <div class="detail-header">
    <a href="#has_data/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> has_data(StoreId, PathPattern, Options) -> HasData | Error
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                HasData :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path has data or not.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.<p><em>See also: </em><a href="#get/3">get/3</a>.</p>
  </section>
</section>
<section class="detail" id="has_data!/1">

  <div class="detail-header">
    <a href="#has_data!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'has_data!'(PathPattern) -> HasData
               when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), HasData :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="has_data!/2">

  <div class="detail-header">
    <a href="#has_data!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'has_data!'(StoreId, PathPattern) -> HasData
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   HasData :: boolean();
           (PathPattern, Options) -> HasData
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   HasData :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="has_data!/3">

  <div class="detail-header">
    <a href="#has_data!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_data!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'has_data!'(StoreId, PathPattern, Options) -> HasData
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   HasData :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="info/0">

  <div class="detail-header">
    <a href="#info/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">info()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> info() -> ok.</pre>

      </div>

Lists the running stores on <em>stdout</em>.
  </section>
</section>
<section class="detail" id="info/1">

  <div class="detail-header">
    <a href="#info/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">info(StoreId)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> info(StoreId) -> ok when StoreId :: <a href="#t:store_id/0">store_id</a>().</pre>

      </div>

Lists the content of specified store on <em>stdout</em>.
  </section>
</section>
<section class="detail" id="info/2">

  <div class="detail-header">
    <a href="#info/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">info(StoreId, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> info(StoreId, Options) -> ok when StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(), Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>().</pre>

      </div>

Lists the content of specified store on <em>stdout</em>.
  </section>
</section>
<section class="detail" id="is_sproc/1">

  <div class="detail-header">
    <a href="#is_sproc/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_sproc(PathPattern) -> IsSproc | Error
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                IsSproc :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p>Calling this function is the same as calling <code>is_sproc(StoreId, PathPattern)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#is_sproc/2">is_sproc/2</a>, <a href="#is_sproc/3">is_sproc/3</a>.</p>
  </section>
</section>
<section class="detail" id="is_sproc/2">

  <div class="detail-header">
    <a href="#is_sproc/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_sproc(StoreId, PathPattern) -> IsSproc | Error
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                IsSproc :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>();
        (PathPattern, Options) -> IsSproc | Error
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                IsSproc :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p>This function accepts the following two forms:<ul><li><code>is_sproc(StoreId, PathPattern)</code>. Calling it is the same as calling <code>is_sproc(StoreId, PathPattern, #{})</code>.</li><li><code>is_sproc(PathPattern, Options)</code>. Calling it is the same as calling <code>is_sproc(StoreId, PathPattern, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#is_sproc/3">is_sproc/3</a>.</p>
  </section>
</section>
<section class="detail" id="is_sproc/3">

  <div class="detail-header">
    <a href="#is_sproc/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_sproc(StoreId, PathPattern, Options) -> IsSproc | Error
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                IsSproc :: boolean(),
                Error :: <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

<p>Indicates if the tree node pointed to by the given path holds a stored procedure or not.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.<p><em>See also: </em><a href="#get/3">get/3</a>.</p>
  </section>
</section>
<section class="detail" id="is_sproc!/1">

  <div class="detail-header">
    <a href="#is_sproc!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc!(PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'is_sproc!'(PathPattern) -> IsSproc
               when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), IsSproc :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="is_sproc!/2">

  <div class="detail-header">
    <a href="#is_sproc!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc!(StoreId, PathPattern)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'is_sproc!'(StoreId, PathPattern) -> IsSproc
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   IsSproc :: boolean();
           (PathPattern, Options) -> IsSproc
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   IsSproc :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="is_sproc!/3">

  <div class="detail-header">
    <a href="#is_sproc!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_sproc!(StoreId, PathPattern, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'is_sproc!'(StoreId, PathPattern, Options) -> IsSproc
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Options :: <a href="#t:query_options/0">query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                   IsSproc :: boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put/2">

  <div class="detail-header">
    <a href="#put/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put(PathPattern, Data) -> Ret
       when
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
           Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Sets the payload of the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>put(StoreId, PathPattern, Data)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#put/3">put/3</a>, <a href="#put/4">put/4</a>.</p>
  </section>
</section>
<section class="detail" id="put/3">

  <div class="detail-header">
    <a href="#put/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put(StoreId, PathPattern, Data) -> Ret
       when
           StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
           Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Sets the payload of the tree node pointed to by the given path pattern.</p>Calling this function is the same as calling <code>put(StoreId, PathPattern, Data, #{})</code>.<p><em>See also: </em><a href="#put/4">put/4</a>.</p>
  </section>
</section>
<section class="detail" id="put/4">

  <div class="detail-header">
    <a href="#put/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put(StoreId, PathPattern, Data, Options) -> Ret
       when
           StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
           PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
           Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
           Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
           Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Sets the payload of the tree node pointed to by the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.</p><p>When using a simple path (i.e. without conditions), if the targeted tree node does not exist, it is created using the given payload. If the targeted tree node exists, it is updated with the given payload and its payload version is increased by one. Missing parent nodes are created on the way.</p><p>When using a path pattern, the behavior is the same. However if a condition in the path pattern is not met, an error is returned and the tree structure is not modified.</p>The payload must be one of the following form:<ul><li>An explicit absence of payload (<a href="khepri_payload.html#t:no_payload/0"><code>khepri_payload:no_payload()</code></a>), using the marker returned by <a href="khepri_payload.html#none/0"><code>khepri_payload:none/0</code></a>, meaning there will be no payload attached to the tree node and the existing payload will be discarded if any</li><li>An anonymous function; it will be considered a stored procedure and will be wrapped in a <a href="khepri_payload.html#t:sproc/0"><code>khepri_payload:sproc()</code></a> record</li><li>Any other term; it will be wrapped in a <a href="khepri_payload.html#t:data/0"><code>khepri_payload:data()</code></a> record</li></ul><p>It is possible to wrap the payload in its internal structure explicitly using the <a href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p><p>The <code>Options</code> map may specify command-level options; see <a href="khepri.html#t:command_options/0"><code>khepri:command_options()</code></a>, <a href="khepri.html#t:tree_options/0"><code>khepri:tree_options()</code></a> and <a href="khepri.html#t:put_options/0"><code>khepri:put_options()</code></a>.</p><p>When doing an asynchronous update, the <a href="#wait_for_async_ret/1"><code>wait_for_async_ret/1</code></a> function can be used to receive the message from Ra.</p>Example:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Insert a tree node at `/:foo/:bar&#39;, overwriting the previous value.</span><span class="w">
  </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri_adv</span><span class="p">:</span><span class="nf">put</span><span class="p" data-group-id="4141396626-1">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4141396626-2">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="4141396626-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">new_value</span><span class="p" data-group-id="4141396626-1">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#compare_and_swap/5">compare_and_swap/5</a>, <a href="#create/4">create/4</a>, <a href="#put_many/4">put_many/4</a>, <a href="#update/4">update/4</a>, <a href="khepri_adv.html#put/4">khepri_adv:put/4</a>.</p>
  </section>
</section>
<section class="detail" id="put!/2">

  <div class="detail-header">
    <a href="#put!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put!(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put!'(PathPattern, Data) -> Payload
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
              Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put!/3">

  <div class="detail-header">
    <a href="#put!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put!(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put!'(StoreId, PathPattern, Data) -> Payload
          when
              StoreId :: <a href="#t:store_id/0">store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
              Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put!/4">

  <div class="detail-header">
    <a href="#put!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put!(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put!'(StoreId, PathPattern, Data, Options) -> Ret
          when
              StoreId :: <a href="#t:store_id/0">store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
              Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
              Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put_many/2">

  <div class="detail-header">
    <a href="#put_many/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put_many(PathPattern, Data) -> Ret
            when
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Sets the payload of all the tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>put_many(StoreId, PathPattern, Data)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#put_many/3">put_many/3</a>, <a href="#put_many/4">put_many/4</a>.</p>
  </section>
</section>
<section class="detail" id="put_many/3">

  <div class="detail-header">
    <a href="#put_many/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put_many(StoreId, PathPattern, Data) -> Ret
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Sets the payload of all the tree nodes matching the given path pattern.</p>Calling this function is the same as calling <code>put_many(StoreId, PathPattern, Data, #{})</code>.<p><em>See also: </em><a href="#put_many/4">put_many/4</a>.</p>
  </section>
</section>
<section class="detail" id="put_many/4">

  <div class="detail-header">
    <a href="#put_many/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put_many(StoreId, PathPattern, Data, Options) -> Ret
            when
                StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
                Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Sets the payload of all the tree nodes matching the given path pattern.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>When using a simple path (i.e. without conditions), if the targeted tree node does not exist, it is created using the given payload. If the targeted tree node exists, it is updated with the given payload and its payload version is increased by one. Missing parent nodes are created on the way.</p><p>When using a path pattern, the behavior is the same. However if a condition in the path pattern is not met, an error is returned and the tree structure is not modified.</p>The payload must be one of the following form:<ul><li>An explicit absence of payload (<a href="khepri_payload.html#t:no_payload/0"><code>khepri_payload:no_payload()</code></a>), using the marker returned by <a href="khepri_payload.html#none/0"><code>khepri_payload:none/0</code></a>, meaning there will be no payload attached to the tree node and the existing payload will be discarded if any</li><li>An anonymous function; it will be considered a stored procedure and will be wrapped in a <a href="khepri_payload.html#t:sproc/0"><code>khepri_payload:sproc()</code></a> record</li><li>Any other term; it will be wrapped in a <a href="khepri_payload.html#t:data/0"><code>khepri_payload:data()</code></a> record</li></ul><p>It is possible to wrap the payload in its internal structure explicitly using the <a href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p><p>The <code>Options</code> map may specify command-level options; see <a href="khepri.html#t:command_options/0"><code>khepri:command_options()</code></a>, <a href="khepri.html#t:tree_options/0"><code>khepri:tree_options()</code></a> and <a href="khepri.html#t:put_options/0"><code>khepri:put_options()</code></a>.</p><p>When doing an asynchronous update, the <a href="#wait_for_async_ret/1"><code>wait_for_async_ret/1</code></a> function can be used to receive the message from Ra.</p>Example:<pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% Insert a tree node at `/:foo/:bar&#39;, overwriting the previous value.</span><span class="w">
  </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri_adv</span><span class="p">:</span><span class="nf">put</span><span class="p" data-group-id="5173944166-1">(</span><span class="n">StoreId</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5173944166-2">[</span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p" data-group-id="5173944166-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">new_value</span><span class="p" data-group-id="5173944166-1">)</span><span class="p">.</span></code></pre><p><em>See also: </em><a href="#put/4">put/4</a>, <a href="khepri_adv.html#put_many/4">khepri_adv:put_many/4</a>.</p>
  </section>
</section>
<section class="detail" id="put_many!/2">

  <div class="detail-header">
    <a href="#put_many!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many!(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put_many!'(PathPattern, Data) -> Payload
               when
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                   Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put_many!/3">

  <div class="detail-header">
    <a href="#put_many!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many!(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put_many!'(StoreId, PathPattern, Data) -> Payload
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                   Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="put_many!/4">

  <div class="detail-header">
    <a href="#put_many!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_many!(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'put_many!'(StoreId, PathPattern, Data, Options) -> Ret
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                   Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                   Options ::
                       <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                   Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="register_trigger/3">

  <div class="detail-header">
    <a href="#register_trigger/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_trigger(TriggerId, EventFilter, StoredProcPath)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> register_trigger(TriggerId, EventFilter, StoredProcPath) -> Ret
                    when
                        TriggerId :: <a href="#t:trigger_id/0">trigger_id</a>(),
                        EventFilter :: <a href="khepri_evf.html#t:event_filter/0">khepri_evf:event_filter</a>() | <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        StoredProcPath :: <a href="khepri_path.html#t:path/0">khepri_path:path</a>(),
                        Ret :: ok | <a href="#t:error/0">error</a>().</pre>

      </div>

<p>Registers a trigger.</p>Calling this function is the same as calling <code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#register_trigger/4">register_trigger/4</a>.</p>
  </section>
</section>
<section class="detail" id="register_trigger/4">

  <div class="detail-header">
    <a href="#register_trigger/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath) -> Ret
                    when
                        StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                        TriggerId :: <a href="#t:trigger_id/0">trigger_id</a>(),
                        EventFilter :: <a href="khepri_evf.html#t:event_filter/0">khepri_evf:event_filter</a>() | <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        StoredProcPath :: <a href="khepri_path.html#t:path/0">khepri_path:path</a>(),
                        Ret :: ok | <a href="#t:error/0">error</a>();
                (TriggerId, EventFilter, StoredProcPath, Options) -> Ret
                    when
                        TriggerId :: <a href="#t:trigger_id/0">trigger_id</a>(),
                        EventFilter :: <a href="khepri_evf.html#t:event_filter/0">khepri_evf:event_filter</a>() | <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        StoredProcPath :: <a href="khepri_path.html#t:path/0">khepri_path:path</a>(),
                        Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                        Ret :: ok | <a href="#t:error/0">error</a>().</pre>

      </div>

<p>Registers a trigger.</p>This function accepts the following two forms:<ul><li><code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath)</code>. Calling it is the same as calling <code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, #{})</code>.</li><li><code>register_trigger(TriggerId, EventFilter, StoredProcPath, Options)</code>. Calling it is the same as calling <code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#register_trigger/5">register_trigger/5</a>.</p>
  </section>
</section>
<section class="detail" id="register_trigger/5">

  <div class="detail-header">
    <a href="#register_trigger/5" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, Options) -> Ret
                    when
                        StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                        TriggerId :: <a href="#t:trigger_id/0">trigger_id</a>(),
                        EventFilter :: <a href="khepri_evf.html#t:event_filter/0">khepri_evf:event_filter</a>() | <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                        StoredProcPath :: <a href="khepri_path.html#t:path/0">khepri_path:path</a>(),
                        Options :: <a href="#t:command_options/0">command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                        Ret :: ok | <a href="#t:error/0">error</a>().</pre>

      </div>

<p>Registers a trigger.</p><p>A trigger is based on an event filter. It associates an event with a stored procedure. When an event matching the event filter is emitted, the stored procedure is executed.</p><p>The following event filters are documented by <a href="khepri_evf.html#t:event_filter/0"><code>khepri_evf:event_filter()</code></a>.</p><p>Here are examples of event filters:</p><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% An event filter can be explicitly created using the `khepri_evf&#39;</span><span class="w">
  </span><span class="c1">%% module. This is possible to specify properties at the same time.</span><span class="w">
  </span><span class="n">EventFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">khepri_evf</span><span class="p">:</span><span class="nf">tree</span><span class="p" data-group-id="5400824110-1">(</span><span class="p" data-group-id="5400824110-2">[</span><span class="ss">stock</span><span class="p">,</span><span class="w"> </span><span class="ss">wood</span><span class="p">,</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="s">&quot;oak&quot;</span><span class="p">&gt;&gt;</span><span class="p" data-group-id="5400824110-2">]</span><span class="p">,</span><span class="w"> </span><span class="c1">%% Required</span><span class="w">
                                </span><span class="p" data-group-id="5400824110-3">#{</span><span class="ss">on_actions</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="5400824110-4">[</span><span class="ss">delete</span><span class="p" data-group-id="5400824110-4">]</span><span class="p">,</span><span class="w"> </span><span class="c1">%% Optional</span><span class="w">
                                  </span><span class="ss">priority</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="5400824110-3">}</span><span class="p" data-group-id="5400824110-1">)</span><span class="p">.</span><span class="w">       </span><span class="c1">%% Optional</span></code></pre><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="c1">%% For ease of use, some terms can be automatically converted to an event</span><span class="w">
  </span><span class="c1">%% filter. In this example, a Unix-like path can be used as a tree event</span><span class="w">
  </span><span class="c1">%% filter.</span><span class="w">
  </span><span class="n">EventFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/:stock/:wood/oak&quot;</span><span class="p">.</span></code></pre><p>The stored procedure is expected to accept a single argument. This argument is a map containing the event properties. Here is an example:</p><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="nf">my_stored_procedure</span><span class="p" data-group-id="6769099346-1">(</span><span class="n">Props</span><span class="p" data-group-id="6769099346-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="6769099346-2">#{</span><span class="ss">path</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Path</span><span class="p" data-group-id="6769099346-2">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">on_action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">Action</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Props</span><span class="p">.</span></code></pre><p>The stored procedure is executed on the leader's Erlang node.</p>It is guaranteed to run at least once. It could be executed multiple times if the Ra leader changes, therefore the stored procedure must be idempotent.
  </section>
</section>
<section class="detail" id="reset/0">

  <div class="detail-header">
    <a href="#reset/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reset() -> Ret when Ret :: ok | <a href="#t:error/0">error</a>().</pre>

      </div>

Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/0">khepri_cluster:reset/0</a>.</p>
  </section>
</section>
<section class="detail" id="reset/1">

  <div class="detail-header">
    <a href="#reset/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset(StoreIdOrTimeout)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reset(StoreId | Timeout) -> Ret
         when StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(), Timeout :: timeout(), Ret :: ok | <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/1">khepri_cluster:reset/1</a>.</p>
  </section>
</section>
<section class="detail" id="reset/2">

  <div class="detail-header">
    <a href="#reset/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset(StoreId, Timeout)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reset(StoreId, Timeout) -> Ret
         when StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(), Timeout :: timeout(), Ret :: ok | <a href="#t:error/0">error</a>().</pre>

      </div>

Resets the store on this Erlang node.<p><em>See also: </em><a href="khepri_cluster.html#reset/2">khepri_cluster:reset/2</a>.</p>
  </section>
</section>
<section class="detail" id="run_sproc/2">

  <div class="detail-header">
    <a href="#run_sproc/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run_sproc(PathPattern, Args)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> run_sproc(PathPattern, Args) -> Ret
             when PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(), Args :: list(), Ret :: any().</pre>

      </div>

<p>Runs the stored procedure pointed to by the given path and returns the result.</p>Calling this function is the same as calling <code>run_sproc(StoreId, PathPattern, Args)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#run_sproc/3">run_sproc/3</a>, <a href="#run_sproc/4">run_sproc/4</a>.</p>
  </section>
</section>
<section class="detail" id="run_sproc/3">

  <div class="detail-header">
    <a href="#run_sproc/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run_sproc(StoreId, PathPattern, Args)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> run_sproc(StoreId, PathPattern, Args) -> Ret
             when
                 StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Args :: list(),
                 Ret :: any();
         (PathPattern, Args, Options) -> Ret
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Args :: list(),
                 Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>(),
                 Ret :: any().</pre>

      </div>

<p>Runs the stored procedure pointed to by the given path and returns the result.</p>This function accepts the following two forms:<ul><li><code>run_sproc(StoreId, PathPattern, Args)</code>. Calling it is the same as calling <code>run_sproc(StoreId, PathPattern, Args, #{})</code>.</li><li><code>run_sproc(PathPattern, Args, Options)</code>. Calling it is the same as calling <code>run_sproc(StoreId, PathPattern, Args, Options)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li></ul><p><em>See also: </em><a href="#run_sproc/4">run_sproc/4</a>.</p>
  </section>
</section>
<section class="detail" id="run_sproc/4">

  <div class="detail-header">
    <a href="#run_sproc/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run_sproc(StoreId, PathPattern, Args, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> run_sproc(StoreId, PathPattern, Args, Options) -> Ret
             when
                 StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Args :: list(),
                 Options :: <a href="khepri.html#t:query_options/0">khepri:query_options</a>(),
                 Ret :: any().</pre>

      </div>

<p>Runs the stored procedure pointed to by the given path and returns the result.</p><p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree node names and conditions) or as a string. See <a href="khepri_path.html#from_string/1"><code>khepri_path:from_string/1</code></a>.</p><p>The <code>PathPattern</code> must target a specific tree node. In other words, updating many nodes with the same payload is denied. That fact is checked before the tree node is looked up: so if a condition in the path could potentially match several nodes, an exception is raised, even though only one tree node would match at the time.</p>The length of the <code>Args</code> list must match the number of arguments expected by the stored procedure.<p><em>See also: </em><a href="#is_sproc/3">is_sproc/3</a>.</p>
  </section>
</section>
<section class="detail" id="start/0">

  <div class="detail-header">
    <a href="#start/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start() -> Ret when Ret :: <a href="khepri.html#t:ok/1">khepri:ok</a>(StoreId) | <a href="khepri.html#t:error/0">khepri:error</a>(), StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>().</pre>

      </div>

Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/0">khepri_cluster:start/0</a>.</p>
  </section>
</section>
<section class="detail" id="start/1">

  <div class="detail-header">
    <a href="#start/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start(RaSystemOrDataDir)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(RaSystem | DataDir) -> Ret
         when
             RaSystem :: atom(),
             DataDir :: <a href="https://www.erlang.org/doc/man/file.html#type-filename_all">file:filename_all</a>(),
             Ret :: <a href="khepri.html#t:ok/1">khepri:ok</a>(StoreId) | <a href="khepri.html#t:error/0">khepri:error</a>(),
             StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>().</pre>

      </div>

Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/1">khepri_cluster:start/1</a>.</p>
  </section>
</section>
<section class="detail" id="start/2">

  <div class="detail-header">
    <a href="#start/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start(RaSystemOrDataDir, StoreIdOrRaServerConfig)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(RaSystem | DataDir, StoreId | RaServerConfig) -> Ret
         when
             RaSystem :: atom(),
             DataDir :: <a href="https://www.erlang.org/doc/man/file.html#type-filename_all">file:filename_all</a>(),
             StoreId :: <a href="#t:store_id/0">store_id</a>(),
             RaServerConfig :: <a href="khepri_cluster.html#t:incomplete_ra_server_config/0">khepri_cluster:incomplete_ra_server_config</a>(),
             Ret :: <a href="khepri.html#t:ok/1">khepri:ok</a>(StoreId) | <a href="khepri.html#t:error/0">khepri:error</a>(),
             StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>().</pre>

      </div>

Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/2">khepri_cluster:start/2</a>.</p>
  </section>
</section>
<section class="detail" id="start/3">

  <div class="detail-header">
    <a href="#start/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start(RaSystemOrDataDir, StoreIdOrRaServerConfig, Timeout)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(RaSystem | DataDir, StoreId | RaServerConfig, Timeout) -> Ret
         when
             RaSystem :: atom(),
             DataDir :: <a href="https://www.erlang.org/doc/man/file.html#type-filename_all">file:filename_all</a>(),
             StoreId :: <a href="#t:store_id/0">store_id</a>(),
             RaServerConfig :: <a href="khepri_cluster.html#t:incomplete_ra_server_config/0">khepri_cluster:incomplete_ra_server_config</a>(),
             Timeout :: timeout(),
             Ret :: <a href="khepri.html#t:ok/1">khepri:ok</a>(StoreId) | <a href="khepri.html#t:error/0">khepri:error</a>(),
             StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>().</pre>

      </div>

Starts a store.<p><em>See also: </em><a href="khepri_cluster.html#start/3">khepri_cluster:start/3</a>.</p>
  </section>
</section>
<section class="detail" id="stop/0">

  <div class="detail-header">
    <a href="#stop/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">stop()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> stop() -> Ret when Ret :: ok | <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

Stops a store.<p><em>See also: </em><a href="khepri_cluster.html#stop/0">khepri_cluster:stop/0</a>.</p>
  </section>
</section>
<section class="detail" id="stop/1">

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">stop(StoreId)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> stop(StoreId) -> Ret when StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(), Ret :: ok | <a href="khepri.html#t:error/0">khepri:error</a>().</pre>

      </div>

Stops a store.<p><em>See also: </em><a href="khepri_cluster.html#stop/1">khepri_cluster:stop/1</a>.</p>
  </section>
</section>
<section class="detail" id="transaction/1">

  <div class="detail-header">
    <a href="#transaction/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">transaction(Fun)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> transaction(Fun) -> Ret when Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(), Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>().</pre>

      </div>

<p>Runs a transaction and returns its result.</p>Calling this function is the same as calling <code>transaction(StoreId, Fun)</code> with the default store ID.<p><em>See also: </em><a href="#transaction/2">transaction/2</a>.</p>
  </section>
</section>
<section class="detail" id="transaction/2">

  <div class="detail-header">
    <a href="#transaction/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">transaction(StoreId, Fun)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> transaction(StoreId, Fun) -> Ret
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>();
           (Fun, ReadWriteOrOptions) -> Ret
               when
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   ReadWriteOrOptions :: ReadWrite | Options,
                   ReadWrite :: ro | rw | auto,
                   Options :: <a href="#t:command_options/0">command_options</a>() | <a href="#t:query_options/0">query_options</a>(),
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Runs a transaction and returns its result.</p>This function accepts the following two forms:<ul><li><code>transaction(StoreId, Fun)</code>. Calling it is the same as calling <code>transaction(StoreId, Fun, #{})</code>.</li><li><code>transaction(Fun, Options)</code>. Calling it is the same as calling <code>transaction(StoreId, Fun, Options)</code> with the default store ID.</li></ul><p><em>See also: </em><a href="#transaction/3">transaction/3</a>.</p>
  </section>
</section>
<section class="detail" id="transaction/3">

  <div class="detail-header">
    <a href="#transaction/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">transaction(StoreId, Fun, ReadWrite)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> transaction(StoreId, Fun, ReadWrite) -> Ret
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   ReadWrite :: ro | rw | auto,
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>();
           (StoreId, Fun, Options) -> Ret
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   Options :: <a href="#t:command_options/0">command_options</a>() | <a href="#t:query_options/0">query_options</a>(),
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>();
           (Fun, ReadWrite, Options) -> Ret
               when
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   ReadWrite :: ro | rw | auto,
                   Options :: <a href="#t:command_options/0">command_options</a>() | <a href="#t:query_options/0">query_options</a>(),
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Runs a transaction and returns its result.</p>This function accepts the following three forms:<ul><li><code>transaction(StoreId, PathPattern, ReadWrite)</code>. Calling it is the same as calling <code>transaction(StoreId, PathPattern, ReadWrite, #{})</code>.</li><li><code>transaction(StoreId, PathPattern, Options)</code>. Calling it is the same as calling <code>transaction(StoreId, PathPattern, auto, Options)</code>.</li><li><code>transaction(PathPattern, ReadWrite, Options)</code>. Calling it is the same as calling <code>transaction(StoreId, PathPattern, ReadWrite, Options)</code> with the default store ID.</li></ul><p><em>See also: </em><a href="#transaction/4">transaction/4</a>.</p>
  </section>
</section>
<section class="detail" id="transaction/4">

  <div class="detail-header">
    <a href="#transaction/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">transaction(StoreId, Fun, ReadWrite, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> transaction(StoreId, Fun, ReadWrite, Options) -> Ret
               when
                   StoreId :: <a href="#t:store_id/0">store_id</a>(),
                   Fun :: <a href="khepri_tx.html#t:tx_fun/0">khepri_tx:tx_fun</a>(),
                   ReadWrite :: ro | rw | auto,
                   Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:query_options/0">khepri:query_options</a>(),
                   Ret :: <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Runs a transaction and returns its result.</p><p><code>Fun</code> is an arbitrary anonymous function which takes no arguments.</p><p>The <code>ReadWrite</code> flag determines what the anonymous function is allowed to do and in which context it runs:</p><ul><li>If <code>ReadWrite</code> is <code>ro</code>, <code>Fun</code> can do whatever it wants, except modify the content of the store. In other words, uses of <a href="khepri_tx.html#put/2"><code>khepri_tx:put/2</code></a> or <a href="khepri_tx.html#delete/1"><code>khepri_tx:delete/1</code></a> are forbidden and will abort the function. <code>Fun</code> is executed from a process on the leader Ra member.</li><li>If <code>ReadWrite</code> is <code>rw</code>, <code>Fun</code> can use the <a href="khepri_tx.html"><code>khepri_tx</code></a> transaction API as well as any calls to other modules as long as those functions or what they do is permitted. See <a href="khepri_tx.html"><code>khepri_tx</code></a> for more details. If <code>Fun</code> does or calls something forbidden, the transaction will be aborted. <code>Fun</code> is executed in the context of the state machine process on each Ra members.</li><li>If <code>ReadWrite</code> is <code>auto</code>, <code>Fun</code> is analyzed to determine if it calls <a href="khepri_tx.html#put/2"><code>khepri_tx:put/2</code></a> or <a href="khepri_tx.html#delete/1"><code>khepri_tx:delete/1</code></a>, or uses any denied operations for a read/write transaction. If it does, this is the same as setting <code>ReadWrite</code> to true. Otherwise, this is the equivalent of setting <code>ReadWrite</code> to false.</li></ul><p><code>Options</code> is relevant for both read-only and read-write transactions (including audetected ones). However note that both types expect different options.</p>The result of <code>Fun</code> can be any term. That result is returned in an <code>{ok, Result}</code> tuple if the transaction is synchronous. The result is sent by message if the transaction is asynchronous and a correlation ID was specified.
  </section>
</section>
<section class="detail" id="update/2">

  <div class="detail-header">
    <a href="#update/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> update(PathPattern, Data) -> Ret
          when
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload.</p>Calling this function is the same as calling <code>update(StoreId, PathPattern, Data)</code> with the default store ID (see <a href="khepri_cluster.html#get_default_store_id/0"><code>khepri_cluster:get_default_store_id/0</code></a>).<p><em>See also: </em><a href="#update/3">update/3</a>, <a href="#update/4">update/4</a>.</p>
  </section>
</section>
<section class="detail" id="update/3">

  <div class="detail-header">
    <a href="#update/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> update(StoreId, PathPattern, Data) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload.</p>Calling this function is the same as calling <code>update(StoreId, PathPattern, Data, #{})</code>.<p><em>See also: </em><a href="#update/4">update/4</a>.</p>
  </section>
</section>
<section class="detail" id="update/4">

  <div class="detail-header">
    <a href="#update/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> update(StoreId, PathPattern, Data, Options) -> Ret
          when
              StoreId :: <a href="khepri.html#t:store_id/0">khepri:store_id</a>(),
              PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
              Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="khepri.html#t:data/0">khepri:data</a>() | fun(),
              Options :: <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
              Ret :: <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>

<p>Updates an existing tree node with the given payload.</p><p>The behavior is the same as <a href="#put/4"><code>put/4</code></a> except that if the tree node already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is returned.</p>Internally, the <code>PathPattern</code> is modified to include an <code>#if_node_exists{exists = true}</code> condition on its last component.<p><em>See also: </em><a href="#compare_and_swap/5">compare_and_swap/5</a>, <a href="#create/4">create/4</a>, <a href="#put/4">put/4</a>, <a href="khepri_adv.html#update/4">khepri_adv:update/4</a>.</p>
  </section>
</section>
<section class="detail" id="update!/2">

  <div class="detail-header">
    <a href="#update!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update!(PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'update!'(PathPattern, Data) -> Payload
             when
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="update!/3">

  <div class="detail-header">
    <a href="#update!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update!(StoreId, PathPattern, Data)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'update!'(StoreId, PathPattern, Data) -> Payload
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Payload :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="update!/4">

  <div class="detail-header">
    <a href="#update!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update!(StoreId, PathPattern, Data, Options)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> 'update!'(StoreId, PathPattern, Data, Options) -> Ret
             when
                 StoreId :: <a href="#t:store_id/0">store_id</a>(),
                 PathPattern :: <a href="khepri_path.html#t:pattern/0">khepri_path:pattern</a>(),
                 Data :: <a href="khepri_payload.html#t:payload/0">khepri_payload:payload</a>() | <a href="#t:data/0">data</a>() | fun(),
                 Options ::
                     <a href="khepri.html#t:command_options/0">khepri:command_options</a>() | <a href="khepri.html#t:tree_options/0">khepri:tree_options</a>() | <a href="khepri.html#t:put_options/0">khepri:put_options</a>(),
                 Ret :: <a href="khepri.html#t:unwrapped_minimal_ret/0">khepri:unwrapped_minimal_ret</a>() | <a href="khepri_machine.html#t:async_ret/0">khepri_machine:async_ret</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="wait_for_async_ret/1">

  <div class="detail-header">
    <a href="#wait_for_async_ret/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">wait_for_async_ret(Correlation)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> wait_for_async_ret(Correlation) -> Ret
                      when
                          Correlation :: <a href="https://hexdocs.pm/ra/ra_server.html#t:command_correlation/0">ra_server:command_correlation</a>(),
                          Ret ::
                              <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() |
                              <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>() |
                              <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>() |
                              <a href="khepri_adv.html#t:single_result/0">khepri_adv:single_result</a>() |
                              <a href="khepri_adv.html#t:many_results/0">khepri_adv:many_results</a>() |
                              <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>().</pre>

      </div>

<p>Waits for an asynchronous call.</p>Calling this function is the same as calling <code>wait_for_async_ret(Correlation)</code> with the default timeout (see <a href="khepri_app.html#get_default_timeout/0"><code>khepri_app:get_default_timeout/0</code></a>).<p><em>See also: </em><a href="#wait_for_async_ret/2">wait_for_async_ret/2</a>.</p>
  </section>
</section>
<section class="detail" id="wait_for_async_ret/2">

  <div class="detail-header">
    <a href="#wait_for_async_ret/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">wait_for_async_ret(Correlation, Timeout)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> wait_for_async_ret(Correlation, Timeout) -> Ret
                      when
                          Correlation :: <a href="https://hexdocs.pm/ra/ra_server.html#t:command_correlation/0">ra_server:command_correlation</a>(),
                          Timeout :: timeout(),
                          Ret ::
                              <a href="khepri.html#t:minimal_ret/0">khepri:minimal_ret</a>() |
                              <a href="khepri.html#t:payload_ret/0">khepri:payload_ret</a>() |
                              <a href="khepri.html#t:many_payloads_ret/0">khepri:many_payloads_ret</a>() |
                              <a href="khepri_adv.html#t:single_result/0">khepri_adv:single_result</a>() |
                              <a href="khepri_adv.html#t:many_results/0">khepri_adv:many_results</a>() |
                              <a href="khepri_machine.html#t:tx_ret/0">khepri_machine:tx_ret</a>().</pre>

      </div>

<p>Waits for an asynchronous call.</p>This function waits maximum <code>Timeout</code> milliseconds (or <code>infinity</code>) for the result of a previous call where the <code>async</code> option was set with a correlation ID. That correlation ID must be passed to this function.<p><em>See also: </em><a href="#wait_for_async_ret/2">wait_for_async_ret/2</a>.</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/khepri/0.4.3" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/khepri/0.4.3" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/khepri/0.4.3/show/src/khepri.erl">(current file)</a>

            </span>

            <button class="a-main line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.5) for the

            <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
